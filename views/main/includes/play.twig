<div class="panel" ng-cloak>
    <div class="panel-body">
        {% if game %}
            <div ng-if="play.loading">
                –ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä—ã...
            </div>

            <div ng-if="play.games.length > 1 || play.currentGame().history.length > 1" class="br-word mb-2 flex flex-wrap flex-h-gap-1 flex-v-gap-1 flex-ai-center">
                <a ng-repeat-start="game in play.games" ng-href="{{'{{game.url}}'}}" data-toggle="tooltip" ng-attr-title="{{'{{\'–ò–≥—Ä–∞ #\' + game.id}}'}}" data-placement="bottom" ng-class="[{true:'ml-1'}[!$first]]">#</a>

                {% include 'components/history.twig' with { 'history': 'game.history'} only %}

                <span ng-repeat-end class="hidden"></span>
            </div>

            <div ng-if="play.turn()">
                <span ng-if="!play.turn().association">ü§ñ –ö–æ–º–ø—å—é—Ç–µ—Ä –≥–æ–≤–æ—Ä–∏—Ç –Ω–æ–≤–æ–µ —Å–ª–æ–≤–æ:</span>
                <span ng-if="play.turn().association">–í –æ—Ç–≤–µ—Ç –Ω–∞ <span class="label turn-label label-success"><a ng-href="{{'{{play.prevTurn().url}}'}}" ng-bind="play.prevTurn().display_name" {% include 'components/original_word_title.twig' with {'word': 'play.prevTurn()'} only %}></a></span> ü§ñ –∫–æ–º–ø—å—é—Ç–µ—Ä –≥–æ–≤–æ—Ä–∏—Ç:</span>
                <span class="label br-word label-info turn-label">
                    <a ng-if="play.turn().feedback.typo" ng-href="{{'{{play.turn().url}}'}}" ng-bind="play.turn().display_name" {% include 'components/original_word_title.twig' with {'word': 'play.turn()'} only %}></a>
                    <a ng-if="!play.turn().feedback.typo" ng-href="{{'{{play.turn().url}}'}}" ng-bind="play.turn().display_name"></a>
                </span>
            </div>

            <div ng-if="!play.loading && !play.turn()">
                ü§ñ –ö–æ–º–ø—å—é—Ç–µ—Ä –Ω–µ –∑–Ω–∞–µ—Ç —Å–ª–æ–≤, –Ω–∞—á–∏–Ω–∞–π—Ç–µ –≤—ã.
            </div>

            <div ng-if="!play.loading" class="col-md-6 col-xs-12 mt-2 ph-0">
                <form autocomplete="off">
                    <div class="form-group mb-2">
                        <label for="nextWord">–í–∞—à–µ —Å–ª–æ–≤–æ:</label>

                        <div class="input-group">
                            <input id="nextWord" ng-model="play.input" class="form-control" maxlength="{{ word_max_length }}" data-focus required />

                            <span class="input-group-btn">
                                <button type="submit" ng-click="sendWord()" class="btn btn-success ajax-button" ng-disabled="!play.input || play.loading || play.saving"><i class="fas fa-spinner fa-lg fa-spin ajax-button-spinner" ng-show="play.saving"></i><span ng-hide="play.saving">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</span></button>
                            </span>
                        </div>
                    </div>
                </form>
            </div>

            <div ng-show="!play.loading" class="col-xs-12 ph-0">
                <div class="alert alert-danger alert-dismissable fade in mt-2">
                    <a href="javascript:void(0)" class="close" data-hide="alert" aria-label="close">&times;</a>
                    <div ng-bind-html="alertError|rawHtml"></div>
                </div>

                <div ng-if="play.turn()" class="mt-2 flex flex-wrap flex-gap-2">
                    <button ng-click="skip()" class="btn btn-default" ng-disabled="play.loading || play.saving" id="skip"><i class="fas fa-forward action-color mr-1"></i> –î—Ä—É–≥–æ–µ —Å–ª–æ–≤–æ</button>

                    <button ng-click="problemsDialog()" class="btn btn-default" ng-disabled="play.loading || play.saving"><i class="fas fa-exclamation-triangle danger-color mr-1"></i> –ß—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫!</button>
                </div>
            </div>

            <div class="alert alert-success alert-dismissable alert-corner fade in">
                <a href="javascript:void()" class="close" data-hide="alert" aria-label="close">&times;</a>
                <span ng-bind="alertSuccess"></span>
            </div>
        {% else %}
            –ê–∫—Ç–∏–≤–Ω–∞—è –∏–≥—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞. –ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫. :/
        {% endif %}
    </div>
</div>
